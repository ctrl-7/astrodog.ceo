---
import Header from "../components/Header.astro";

export async function getStaticPaths() {
    const response = await fetch('https://dog.ceo/api/breeds/list/all')
    const data = await response.json()
    const breeds = data.message
    const breedsArray = Object.keys(breeds)
    const paths = breedsArray.map(breed => {
        return {
            params: {
                breed: breed
            }
        }
    })
    return paths
}


const { breed } = Astro.params
const response = await fetch(`https://dog.ceo/api/breed/${breed}/images`)
const data = await response.json()
const imageArray = data.message
const shuffledArray = imageArray.sort(() => Math.random() - 0.5)
const first30 = shuffledArray.slice(0, 30)


---

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogs</title>
    <link rel="shortcut icon" href="//gavn.in/fav" type="image/x-icon">
</head>

<body>

    <Header />

    <section>
        <main class="container mx-auto px-5 py-20 ">
            <h1 class="font-black text-center uppercase text-6xl">{breed}</h1>

            <div class="flex flex-wrap gap-5 mt-12 items-start">

                {
                first30.map(image=>
                <img src={image} />
                )
                }


            </div>
        </main>
    </section>

</body>

</html>